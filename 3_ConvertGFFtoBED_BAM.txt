#!/bin/bash

cd .. 

#umformatieren in ein brauchchbares format für den nächsten Schritt(als Schleife für viele files)

mkdir BED-files
cd GFF-files


for i in telobox_P*.gff
do
sed -i '/^[#]/ d' $i #damit wird man die Kommentarzeile des outputs von fuzznuc los
sed -i '/^$/d' $i # damit wird man Leerzeilen los
gff2bed < $i | bedtools bedtobam -i - -g ../Physcomitrium_patens_chrom.txt | samtools sort -o ../BAM-files/"${i%.gff}.bam" -
samtools index ../BAM-files/${i%.gff}.bam
gff2bed < $i > ../BED-files/"${i%.gff}.bed"
done


#for i in telobox_Ma*.gff
#do
#sed -i '/^[#]/ d' $i #damit wird man die Kommentarzeile des outputs von fuzznuc los
#sed -i '/^$/d' $i # damit wird man Leerzeilen los
#gff2bed < $i | bedtools bedtobam -i - -g ../Marchantia_polymorpha_chrom.txt | samtools sort -o ../BAM-files/"${i%.gff}.bam" -
#samtools index ../BAM-files/${i%.gff}.bam
#gff2bed < $i > ../BED-files/"${i%.gff}.bed"
#done


#for i in telobox_MpT*.gff
#do
#sed -i '/^[#]/ d' $i #damit wird man die Kommentarzeile des outputs von fuzznuc los
#sed -i '/^$/d' $i # damit wird man Leerzeilen los
#gff2bed < $i | bedtools bedtobam -i - -g ../MpTak1v5_chrom.txt | samtools sort -o ../BAM-files/"${i%.gff}.bam" -
#samtools index ../BAM-files/${i%.gff}.bam
#gff2bed < $i > ../BED-files/"${i%.gff}.bed"
#done


for i in telolike_M*.gff
do
sed -i '/^[#]/ d' $i #damit wird man die Kommentarzeile des outputs von fuzznuc los
sed -i '/^$/d' $i # damit wird man Leerzeilen los
gff2bed < $i | bedtools bedtobam -i - -g ../MpTak1v5_chrom.txt | samtools sort -o ../BAM-files/"${i%.gff}.bam" -
samtools index ../BAM-files/${i%.gff}.bam
gff2bed < $i > ../BED-files/"${i%.gff}.bed"
done

for i in telolike_P*.gff
do
sed -i '/^[#]/ d' $i #damit wird man die Kommentarzeile des outputs von fuzznuc los
sed -i '/^$/d' $i # damit wird man Leerzeilen los
gff2bed < $i | bedtools bedtobam -i - -g ../Physcomitrium_patens_chrom.txt | samtools sort -o ../BAM-files/"${i%.gff}.bam" -
samtools index ../BAM-files/${i%.gff}.bam
gff2bed < $i > ../BED-files/"${i%.gff}.bed"
done


